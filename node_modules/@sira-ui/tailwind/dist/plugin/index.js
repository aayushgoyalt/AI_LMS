"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const object_1=require("./utils/object"),light_theme_1=require("./theme/light-theme"),variables_1=require("./theme/variables"),dark_theme_1=require("./theme/dark-theme"),plugin_1=__importDefault(require("tailwindcss/plugin")),fs_1=__importDefault(require("fs")),postcss_1=__importDefault(require("postcss")),postcss_js_1=__importDefault(require("postcss-js")),path_1=__importDefault(require("path")),theme_1=require("./utils/theme"),lodash_1=__importDefault(require("lodash")),prefix_1=require("./utils/prefix"),cssPath=path_1.default.resolve(__dirname,path_1.default.join("..","css")),baseCSS=fs_1.default.readFileSync(path_1.default.join(cssPath,"base.css"),"utf-8"),componentsCSS=fs_1.default.readFileSync(path_1.default.join(cssPath,"components.css"),"utf-8"),utilitiesCSS=fs_1.default.readFileSync(path_1.default.join(cssPath,"utilities.css"),"utf-8"),config=plugin_1.default.withOptions((e=>({addBase:t,addComponents:s,addUtilities:i})=>{var a,l;const r=postcss_1.default.parse(baseCSS),o=postcss_1.default.parse(componentsCSS),_=postcss_1.default.parse(utilitiesCSS),c=postcss_js_1.default.objectify(r),d=postcss_js_1.default.objectify(o),u=postcss_js_1.default.objectify(_),h=Object.assign({},e)||{},f=(null!==(a=h.themes)&&void 0!==a?a:[]).concat([light_theme_1.lightTheme,dark_theme_1.darkTheme]),m=f.find((e=>"light"===e.name)),n=f.find((e=>"dark"===e.name)),p=f.filter((e=>"light"!==e.name&&"dark"!==e.name))||[],g={prefix:h.prefix,excludedThemes:h.excludedThemes||[],themes:[Object.assign(Object.assign({},m),{name:"light",colorScheme:"light"}),Object.assign(Object.assign({},n),{name:"dark",colorScheme:"dark"}),...p]};if((0,object_1.isValidObject)(g)){const e=g.themes||[],s=g.excludedThemes||[],i=(0,theme_1.excludeThemesByName)(s,e);i.length>0&&i.forEach((e=>{let s;s="dark"===e.colorScheme?lodash_1.default.merge(dark_theme_1.darkTheme,e):lodash_1.default.merge(light_theme_1.lightTheme,e),(0,theme_1.processThemeVariables)(t,s)}))}t(c);s((0,prefix_1.getSelectorsWithPrefix)(null!==(l=h.prefix)&&void 0!==l?l:"",d)),i(u)}),(e=>{const t=[];if((0,object_1.isValidObject)(e)){(e.themes||[]).forEach((e=>{(null==e?void 0:e.colors)&&t.push(...Object.keys(e.colors))}))}return{theme:{extend:{colors:Object.assign({},(0,variables_1.generateTailwindThemeExtendedColors)(lodash_1.default.uniq(t)))}}}}));module.exports=config;